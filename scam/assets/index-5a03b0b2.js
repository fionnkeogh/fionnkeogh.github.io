var me=Object.defineProperty;var we=(t,e,n)=>e in t?me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>(we(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $(){}function he(t){return t()}function ue(){return Object.create(null)}function A(t){t.forEach(he)}function te(t){return typeof t=="function"}function G(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _e(t){return Object.keys(t).length===0}function ye(t){return t&&te(t.destroy)?t.destroy:$}function g(t,e){t.appendChild(e)}function F(t,e,n){t.insertBefore(e,n||null)}function I(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function ne(t){return document.createTextNode(t)}function C(){return ne(" ")}function ve(){return ne("")}function X(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function be(t){return Array.from(t.childNodes)}function Ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function de(t,e){t.value=e??""}function T(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function le(t,e){return new t(e)}let ie;function B(t){ie=t}const L=[],fe=[];let M=[];const ce=[],$e=Promise.resolve();let Z=!1;function Se(){Z||(Z=!0,$e.then(ge))}function ee(t){M.push(t)}const Q=new Set;let W=0;function ge(){if(W!==0)return;const t=ie;do{try{for(;W<L.length;){const e=L[W];W++,B(e),xe(e.$$)}}catch(e){throw L.length=0,W=0,e}for(B(null),L.length=0,W=0;fe.length;)fe.pop()();for(let e=0;e<M.length;e+=1){const n=M[e];Q.has(n)||(Q.add(n),n())}M.length=0}while(L.length);for(;ce.length;)ce.pop()();Z=!1,Q.clear(),B(t)}function xe(t){if(t.fragment!==null){t.update(),A(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ee)}}function Ee(t){const e=[],n=[];M.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),M=e}const U=new Set;let J;function Ne(){J={r:0,c:[],p:J}}function Pe(){J.r||A(J.c),J=J.p}function S(t,e){t&&t.i&&(U.delete(t),t.i(e))}function N(t,e,n,r){if(t&&t.o){if(U.has(t))return;U.add(t),J.c.push(()=>{U.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function P(t){t&&t.c()}function x(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),ee(()=>{const o=t.$$.on_mount.map(he).filter(te);t.$$.on_destroy?t.$$.on_destroy.push(...o):A(o),t.$$.on_mount=[]}),i.forEach(ee)}function E(t,e){const n=t.$$;n.fragment!==null&&(Ee(n.after_update),A(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,e){t.$$.dirty[0]===-1&&(L.push(t),Se(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,e,n,r,i,o,a,c=[-1]){const d=ie;B(t);const u=t.$$={fragment:null,ctx:[],props:o,update:$,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:ue(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};a&&a(u.root);let h=!1;if(u.ctx=n?n(t,e.props||{},(f,p,...w)=>{const v=w.length?w[0]:p;return u.ctx&&i(u.ctx[f],u.ctx[f]=v)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](v),h&&Te(t,f)),p}):[],u.update(),h=!0,A(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=be(e.target);u.fragment&&u.fragment.l(f),f.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),x(t,e.target,e.anchor),ge()}B(d)}class q{constructor(){z(this,"$$");z(this,"$$set")}$destroy(){E(this,1),this.$destroy=$}$on(e,n){if(!te(n))return $;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!_e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Je="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Je);function He(t){let e,n,r,i,o,a,c;return{c(){e=m("div"),n=m("input"),r=C(),i=m("label"),o=ne(t[2]),y(n,"id",t[1]),y(n,"type","text"),y(n,"inputmode","numeric"),y(n,"pattern","[0-9]*"),T(n,"margin-left","140px"),T(n,"width","40px"),T(n,"box-shadow","none"),T(n,"border-bottom","none"),y(i,"for",t[1]),y(i,"style",t[3]),y(e,"class","input-field col s6")},m(d,u){F(d,e,u),g(e,n),de(n,t[0]),g(e,r),g(e,i),g(i,o),a||(c=[X(n,"input",t[4]),X(n,"invalid",t[5])],a=!0)},p(d,[u]){u&2&&y(n,"id",d[1]),u&1&&n.value!==d[0]&&de(n,d[0]),u&4&&Ce(o,d[2]),u&2&&y(i,"for",d[1]),u&8&&y(i,"style",d[3])},i:$,o:$,d(d){d&&I(e),a=!1,A(c)}}}function Oe(t,e,n){let{id:r}=e,{value:i}=e,{label:o}=e,{style:a=""}=e;function c(){i=this.value,n(0,i)}const d=()=>alert("You must enter only numbers!");return t.$$set=u=>{"id"in u&&n(1,r=u.id),"value"in u&&n(0,i=u.value),"label"in u&&n(2,o=u.label),"style"in u&&n(3,a=u.style)},[i,r,o,a,c,d]}class k extends q{constructor(e){super(),R(this,e,Oe,He,G,{id:1,value:0,label:2,style:3})}}function We(t){let e,n,r,i,o,a,c,d,u,h,f,p,w,v,s,l,b,H,re,V,oe,D,O,ae,j,K,Y,se;return u=new k({props:{id:"x",value:Le,label:"Number of Columns:"}}),f=new k({props:{id:"y",value:Me,label:"Number of Rows:"}}),l=new k({props:{id:"macrophages",value:Ae,label:"Macrophages:"}}),H=new k({props:{id:"candida",value:Ie,label:"Candida:"}}),O=new k({props:{id:"steps",value:je,label:"Steps:",style:"padding-left: 170px;"}}),{c(){e=m("main"),n=m("h1"),n.textContent="Welcome to SCAM",r=C(),i=m("form"),o=m("div"),a=m("h5"),a.textContent="Size of the grid:",c=C(),d=m("div"),P(u.$$.fragment),h=C(),P(f.$$.fragment),p=C(),w=m("h5"),w.textContent="Number of Agents:",v=C(),s=m("div"),P(l.$$.fragment),b=C(),P(H.$$.fragment),re=C(),V=m("h5"),V.textContent="Number of Steps to Simulate:",oe=C(),D=m("div"),P(O.$$.fragment),ae=C(),j=m("div"),j.innerHTML=`<button class="btn waves-effect waves-light" type="submit" name="action">Submit
                <i class="material-icons right">send</i></button>`,y(d,"class","row"),y(s,"class","row"),y(D,"class","row"),y(j,"class","row"),T(j,"margin","10px")},m(_,pe){F(_,e,pe),g(e,n),g(e,r),g(e,i),g(i,o),g(o,a),g(o,c),g(o,d),x(u,d,null),g(d,h),x(f,d,null),g(o,p),g(o,w),g(o,v),g(o,s),x(l,s,null),g(s,b),x(H,s,null),g(o,re),g(o,V),g(o,oe),g(o,D),x(O,D,null),g(i,ae),g(i,j),K=!0,Y||(se=X(i,"submit",t[0]),Y=!0)},p:$,i(_){K||(S(u.$$.fragment,_),S(f.$$.fragment,_),S(l.$$.fragment,_),S(H.$$.fragment,_),S(O.$$.fragment,_),K=!0)},o(_){N(u.$$.fragment,_),N(f.$$.fragment,_),N(l.$$.fragment,_),N(H.$$.fragment,_),N(O.$$.fragment,_),K=!1},d(_){_&&I(e),E(u),E(f),E(l),E(H),E(O),Y=!1,se()}}}let Le=10,Me=10,Ae=3,Ie=5,je=100;function ke(t,e,n){let{openPage:r}=e,{pythonToJS:i}=e;function o(a){a.preventDefault();const c=[[Number(a.target[0].value),Number(a.target[1].value)],Number(a.target[3].value),Number(a.target[2].value),Number(a.target[4].value)];return pyodideGlobals.get("init_simulation")(c),r(1),!1}return t.$$set=a=>{"openPage"in a&&n(1,r=a.openPage),"pythonToJS"in a&&n(2,i=a.pythonToJS)},[o,r,i]}class Be extends q{constructor(e){super(),R(this,e,ke,We,G,{openPage:1,pythonToJS:2})}}function Ge(t){let e,n,r;return{c(){e=m("canvas"),y(e,"id","view"),T(e,"border-style","solid"),T(e,"border-width","1px"),T(e,"border-color","black")},m(i,o){F(i,e,o),n||(r=ye(t[0].call(null,e)),n=!0)},p:$,i:$,o:$,d(i){i&&I(e),n=!1,r()}}}function Fe(t,e,n){let{simulation:r}=e,{pythonToJS:i}=e,{updateSimulation:o}=e;function a(c){const d=initCanvas(),u=d.getContext("2d");loop(u,d);const h=i(r.get_grid()),f=new Grid(h.x,h.y,d.width,d.height);console.log(d.width),addCanvasObject(f),d.addEventListener("contextrestored",p=>{r.update(),o()},!1)}return t.$$set=c=>{"simulation"in c&&n(1,r=c.simulation),"pythonToJS"in c&&n(2,i=c.pythonToJS),"updateSimulation"in c&&n(3,o=c.updateSimulation)},[a,r,i,o]}class Re extends q{constructor(e){super(),R(this,e,Fe,Ge,G,{simulation:1,pythonToJS:2,updateSimulation:3})}}function qe(t){let e,n,r;return n=new Re({props:{simulation:t[1],pythonToJS:t[0],updateSimulation:t[2]}}),{c(){e=m("main"),P(n.$$.fragment)},m(i,o){F(i,e,o),x(n,e,null),r=!0},p(i,[o]){const a={};o&1&&(a.pythonToJS=i[0]),n.$set(a)},i(i){r||(S(n.$$.fragment,i),r=!0)},o(i){N(n.$$.fragment,i),r=!1},d(i){i&&I(e),E(n)}}}function De(t,e,n){let{openPage:r}=e,{pythonToJS:i}=e;const o=pyodideGlobals.get("get_simulation")();o.start_new_simulation();function a(h){const f=i(o.get_macrophages());let p=getCanvasMacrophages();const w=[],v=[];f.forEach(s=>{w.push(s.id)}),p.forEach(s=>{v.push(s.id)}),p.forEach(s=>{w.find(l=>l===s.id)===void 0&&removeCanvasMacrophages(s)}),f.forEach(s=>{if(v.find(l=>l===s.id)===void 0){let l=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75,b=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75;addCanvasMacrophages(new Macrophage(s.id,s.x,s.y,l/h.x,b/h.y))}}),p=getCanvasMacrophages(),p.forEach(s=>{let l=f.find(b=>b.id===s.id);s.update(l.x,l.y)})}function c(h){const f=i(o.get_candida());let p=getCanvasCandida();const w=[],v=[];f.forEach(s=>{w.push(s.id)}),p.forEach(s=>{v.push(s.id)}),p.forEach(s=>{w.find(l=>l===s.id)===void 0&&removeCanvasCandida(s)}),f.forEach(s=>{if(v.find(l=>l===s.id)===void 0){let l=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75,b=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75;addCanvasCandida(new Candida(s.id,s.x,s.y,l/h.x,b/h.y))}}),p=getCanvasCandida(),p.forEach(s=>{s.update()})}function d(h){const f=i(o.get_cytokines());let p=getCanvasCytokines();const w=[],v=[];f.forEach(s=>{w.push(s.id)}),p.forEach(s=>{v.push(s.id)}),p.forEach(s=>{w.find(l=>l===s.id)===void 0&&removeCanvasCytokines(s)}),f.forEach(s=>{if(v.find(l=>l===s.id)===void 0){let l=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75,b=(window.innerHeight<window.innerWidth?window.innerHeight:window.innerWidth)*.75;addCanvasCytokines(new Cytokine(s.id,s.x,s.y,l/h.x,b/h.y,s.radius))}}),p=getCanvasCytokines(),p.forEach(s=>{let l=f.find(b=>b.id===s.id);s.update(i(l.neighborhood))})}function u(){const h=i(o.get_grid());d(h),a(h),c(h)}return t.$$set=h=>{"openPage"in h&&n(3,r=h.openPage),"pythonToJS"in h&&n(0,i=h.pythonToJS)},[i,o,u,r]}class Ke extends q{constructor(e){super(),R(this,e,De,qe,G,{openPage:3,pythonToJS:0})}}function Ue(t){let e,n,r;var i=t[1][t[0]];function o(a,c){return{props:{openPage:a[2],pythonToJS:Ve}}}return i&&(e=le(i,o(t))),{c(){e&&P(e.$$.fragment),n=ve()},m(a,c){e&&x(e,a,c),F(a,n,c),r=!0},p(a,[c]){if(c&1&&i!==(i=a[1][a[0]])){if(e){Ne();const d=e;N(d.$$.fragment,1,0,()=>{E(d,1)}),Pe()}i?(e=le(i,o(a)),P(e.$$.fragment),S(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}},i(a){r||(e&&S(e.$$.fragment,a),r=!0)},o(a){e&&N(e.$$.fragment,a),r=!1},d(a){a&&I(n),e&&E(e,a)}}}function Ve(t){if(t.toString()!="None")return JSON.parse(t.toString().replaceAll(/'/g,'"'))}function Ye(t,e,n){const r=[Be,Ke];let i=0;function o(a){return n(0,i=a),i}return[i,r,o]}class ze extends q{constructor(e){super(),R(this,e,Ye,Ue,G,{})}}new ze({target:document.getElementById("app")});
